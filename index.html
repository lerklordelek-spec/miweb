<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CorazÃ³n Animado</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  html, body {
    height: 100%;
    background: #000;
    font-family: 'Poppins', sans-serif;
    color: #eee;
    overflow: hidden;
    user-select: none;
  }
  #canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    display: block;
    z-index: 1;
    background: #000;
  }
  #mainText {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #d26a5a;
    font-size: 1.4rem;
    font-weight: 600;
    text-align: center;
    max-width: 90vw;
    z-index: 10;
    user-select: none;
    line-height: 1.4;
    letter-spacing: 0.02em;
    text-shadow: 0 0 4px #b84e42aa;
    animation: pulseText 3s ease-in-out infinite;
    opacity: 1;
    display: block;
  }
  @keyframes pulseText {
    0%, 100% { opacity: 0.9; }
    50% { opacity: 1; }
  }
  #buttons {
    position: fixed;
    bottom: 30px;
    width: 100%;
    text-align: center;
    z-index: 15;
    display: flex;
    gap: 25px;
    justify-content: center;
  }
  button {
    font-family: 'Poppins', sans-serif;
    font-weight: 700;
    font-size: 1.3rem;
    padding: 12px 36px;
    border-radius: 30px;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.15s ease;
    user-select: none;
  }
  button:active {
    transform: scale(0.95);
  }
  #seguirBtn {
    background-color: #2ecc71;
    color: white;
  }
  #seguirBtn:hover {
    background-color: #27ae60;
  }
  #quedarseBtn {
    background-color: #e74c3c;
    color: white;
  }
  #quedarseBtn:hover {
    background-color: #c0392b;
  }
  #teamoBtn {
    background-color: #d85ca3;
    color: white;
  }
  #teamoBtn:hover {
    background-color: #b2417a;
  }
  #pageSV {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: #121212;
    color: #f4f4f4;
    z-index: 20;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    font-weight: 700;
    font-size: 5rem;
    text-align: center;
    user-select: none;
    opacity: 0;
    transition: opacity 0.8s ease;
  }
  #pageSV.show {
    display: flex;
    opacity: 1;
  }
  #pageSV h1 {
    font-size: 5.5rem;
    font-weight: 900;
    letter-spacing: 0.3em;
    color: #e74c3c;
    text-shadow: 0 0 15px #e74c3cbb;
    margin-bottom: 30px;
  }
  iframe {
    border-radius: 16px;
    box-shadow: 0 0 30px #e74c3caa;
    width: 90vw;
    max-width: 720px;
    height: 405px;
    border: none;
  }
  #pageTeAmo {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: #000;
    color: #d85ca3;
    z-index: 30;
    overflow: hidden;
    font-weight: 900;
    font-size: 3rem;
    text-align: center;
    user-select: none;
    opacity: 0;
    transition: opacity 0.8s ease;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-content: flex-start;
    padding: 20px;
  }
  #pageTeAmo.show {
    opacity: 1;
  }
  .teamoText {
    margin: 2px 6px;
    animation: fall 6s linear infinite;
    user-select: none;
    white-space: nowrap;
  }
  @keyframes fall {
    0% {
      transform: translateY(-100vh) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(110vh) rotate(360deg);
      opacity: 0;
    }
  }
  #audioControl {
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 50;
    background: #444;
    border: none;
    color: white;
    font-size: 1.2rem;
    padding: 8px 14px;
    border-radius: 20px;
    cursor: pointer;
    user-select: none;
    opacity: 0.7;
    transition: opacity 0.3s ease;
  }
  #audioControl:hover {
    opacity: 1;
  }
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<div id="mainText">
  aun estoy aprendiendo pero esto es para ti jsksjsk,<br> te amo mucho :3
</div>
<div id="buttons">
  <button id="seguirBtn">Seguir</button>
  <button id="quedarseBtn">Quedarse</button>
  <button id="teamoBtn">Te amo</button>
</div>
<div id="pageSV" aria-label="PÃ¡gina S y V">
  <h1>S &amp; V</h1>
  <iframe
    src="https://www.youtube.com/embed/rgx_peYT9ZY?si=-ZjeThUgL1sJVf7G"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen
    title="Video S y V"
  ></iframe>
</div>
<div id="pageTeAmo" aria-label="PÃ¡gina Te Amo"></div>
<button id="audioControl" title="Pausar/Reproducir mÃºsica">ðŸŽ· Jazz ON</button>
<audio id="backgroundMusic" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/22/audio_d24bb9b5ca.mp3?filename=jazz-in-paris-14831.mp3" type="audio/mpeg">
  Tu navegador no soporta el elemento de audio.
</audio>
<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const mainText = document.getElementById('mainText');
  const buttons = document.getElementById('buttons');
  const seguirBtn = document.getElementById('seguirBtn');
  const quedarseBtn = document.getElementById('quedarseBtn');
  const teamoBtn = document.getElementById('teamoBtn');
  const pageSV = document.getElementById('pageSV');
  const pageTeAmo = document.getElementById('pageTeAmo');
  const audioControl = document.getElementById('audioControl');
  const backgroundMusic = document.getElementById('backgroundMusic');

  let W, H;
  function resize() {
    W = window.innerWidth;
    H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;
  }
  window.addEventListener('resize', resize);
  resize();

  class Particle {
    constructor(x, y, color) {
      this.x = x;
      this.y = y;
      this.destX = x;
      this.destY = y;
      this.vx = (Math.random() - 0.5) * 3;
      this.vy = (Math.random() - 0.5) * 3;
      this.color = color;
      this.radius = 2.3;
      this.friction = 0.88;
      this.ease = 0.12;
    }
    draw() {
      ctx.beginPath();
      ctx.fillStyle = this.color;
      ctx.shadowColor = this.color;
      ctx.shadowBlur = 0;
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fill();
    }
    update() {
      let dx = this.destX - this.x;
      let dy = this.destY - this.y;
      this.vx += dx * this.ease;
      this.vy += dy * this.ease;
      this.vx *= this.friction;
      this.vy *= this.friction;
      this.x += this.vx;
      this.y += this.vy;
    }
  }
  function createHeartPoints(centerX, centerY, size, count) {
    const points = [];
    for (let i = 0; i < count; i++) {
      let t = (i / count) * Math.PI * 2;
      let x = 16 * Math.pow(Math.sin(t), 3);
      let y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
      points.push({
        x: centerX + x * size,
        y: centerY - y * size
      });
    }
    return points;
  }

  class MiniHeart {
    constructor(x, y, color) {
      this.x = x;
      this.y = y;
      this.vy = 1 + Math.random() * 1.5;
      this.radius = 6;
      this.color = color;
      this.opacity = 1;
      this.vx = (Math.random() - 0.5) * 0.5;
      this.rotation = Math.random() * 360;
      this.rotationSpeed = (Math.random() - 0.5) * 4;
    }
    draw() {
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate((this.rotation * Math.PI) / 180);
      ctx.fillStyle = this.color;
      ctx.globalAlpha = this.opacity;
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.bezierCurveTo(-this.radius, -this.radius, -this.radius, this.radius / 2, 0, this.radius);
      ctx.bezierCurveTo(this.radius, this.radius / 2, this.radius, -this.radius, 0, 0);
      ctx.fill();
      ctx.restore();
    }
    update() {
      this.y += this.vy;
      this.x += this.vx;
      this.rotation += this.rotationSpeed;
      this.opacity -= 0.008;
      if (this.opacity < 0) this.opacity = 0;
    }
  }
  class FireParticle {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.vx = (Math.random() - 0.5) * 2;
      this.vy = Math.random() * -3 - 1;
      this.radius = 4 + Math.random() * 2;
      this.life = 100 + Math.random() * 50;
      this.opacity = 1;
    }
    draw() {
      const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.radius);
      gradient.addColorStop(0, `rgba(255,${Math.floor(150 + Math.random() * 100)},0,${this.opacity})`);
      gradient.addColorStop(1, `rgba(255,0,0,0)`);
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fill();
    }
    update() {
      this.x += this.vx;
      this.y += this.vy;
      this.life--;
      this.opacity = this.life / 150;
    }
  }

  const centerX = W / 2;
  const centerY = H / 2.8;
  const heartSize = Math.min(W, H) / 25;
  const particlesCount = 120;
  const heartPoints = createHeartPoints(centerX, centerY, heartSize, particlesCount);
  const particles = [];

  for (let p of heartPoints) {
    particles.push(new Particle(
      Math.random() * W,
      Math.random() * H,
      '#d26a5a'
    ));
  }

  let animationId;
  let miniHearts = [];
  let fireParticles = [];
  const teamoTexts = [];

  function animateHeart() {
    ctx.clearRect(0, 0, W, H);
    for (let i = 0; i < particles.length; i++) {
      let p = particles[i];
      let point = heartPoints[i];
      p.destX = point.x;
      p.destY = point.y;
      p.update();
      p.draw();
    }
    animationId = requestAnimationFrame(animateHeart);
  }

  function animateQuedarse() {
    ctx.clearRect(0, 0, W, H);
    if (Math.random() < 0.25) {
      miniHearts.push(new MiniHeart(Math.random() * W, -20, 'rgba(231, 76, 60, 0.9)'));
    }
    for (let i = miniHearts.length - 1; i >= 0; i--) {
      const h = miniHearts[i];
      h.update();
      h.draw();
      if (h.opacity <= 0 || h.y > H + 50) miniHearts.splice(i, 1);
    }
    animationId = requestAnimationFrame(animateQuedarse);
  }

  function animateSeguir() {
    ctx.clearRect(0, 0, W, H);
    if (Math.random() < 0.4) {
      fireParticles.push(new FireParticle(Math.random() * W, H + 20));
    }
    for (let i = fireParticles.length -1; i >= 0; i--) {
      const f = fireParticles[i];
      f.update();
      f.draw();
      if (f.life <= 0 || f.y < -50) fireParticles.splice(i, 1);
    }
    animationId = requestAnimationFrame(animateSeguir);
  }

  function createTeAmoTexts() {
    teamoTexts.length = 0;
    pageTeAmo.innerHTML = '';
    const textosCount = Math.floor(W / 60) * 5;
    for (let i = 0; i < textosCount; i++) {
      const div = document.createElement('div');
      div.className = 'teamoText';
      div.style.position = 'absolute';
      div.style.left = (Math.random() * 90) + 'vw';
      div.style.top = (-Math.random() * 100) + 'vh';
      div.style.fontSize = (18 + Math.random() * 18) + 'px';
      div.style.animationDelay = (Math.random() * 6) + 's';
      div.textContent = 'TE AMO';
      pageTeAmo.appendChild(div);
      teamoTexts.push(div);
    }
  }

  function showPageSV() {
    mainText.style.display = 'none';
    buttons.style.display = 'none';
    pageTeAmo.classList.remove('show');
    pageTeAmo.style.display = 'none';
    pageSV.classList.add('show');
    cancelAnimationFrame(animationId);
    fireParticles = [];
    animateSeguir();
  }

  function showPageQuedarse() {
    mainText.style.display = 'none';
    buttons.style.display = 'none';
    pageSV.classList.remove('show');
    pageTeAmo.classList.remove('show');
    pageTeAmo.style.display = 'none';
    pageSV.style.display = 'none';
    cancelAnimationFrame(animationId);
    miniHearts = [];
    animateQuedarse();
  }

  function showPageTeAmo() {
    mainText.style.display = 'none';
    buttons.style.display = 'none';
    pageSV.classList.remove('show');
    pageSV.style.display = 'none';
    pageTeAmo.style.display = 'flex';
    pageTeAmo.classList.add('show');
    createTeAmoTexts();
    cancelAnimationFrame(animationId);
    ctx.clearRect(0,0,W,H);
  }

  function resetToHeart() {
    mainText.style.display = 'block';
    buttons.style.display = 'flex';
    pageSV.classList.remove('show');
    pageSV.style.display = 'none';
    pageTeAmo.classList.remove('show');
    pageTeAmo.style.display = 'none';
    cancelAnimationFrame(animationId);
    animateHeart();
  }

  seguirBtn.onclick = showPageSV;
  quedarseBtn.onclick = showPageQuedarse;
  teamoBtn.onclick = showPageTeAmo;

  // BotÃ³n mÃºsica
  let musicPlaying = false;
  audioControl.onclick = () => {
    if (musicPlaying) {
      backgroundMusic.pause();
      audioControl.textContent = "ðŸŽ· Jazz OFF";
      musicPlaying = false;
    } else {
      backgroundMusic.play();
      audioControl.textContent = "ðŸŽ· Jazz ON";
      musicPlaying = true;
    }
  };
  backgroundMusic.volume = 0.3;
  // Auto start music (opcional, puede ser bloqueado por navegador)
  // backgroundMusic.play().catch(()=>{});

  animateHeart();
</script>
</body>
</html>